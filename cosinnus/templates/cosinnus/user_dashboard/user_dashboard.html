{% extends "cosinnus/base.html" %}
{% load i18n thumbnail cosinnus_tags %}

{% block page_title %}{% trans "Home" %}{% endblock %}

{% block og_url %}{{ block.super }}{% endblock og_url %}
{% block og_title %}{{ block.super }}{% endblock %}
{% block og_image %}{{ block.super }}{% endblock %}
{% block og_description %}{{ block.super }}{% endblock %}

{% block og_meta_attributes %}
    {{ block.super }}
{% endblock %}

{% block extrahead %}
    {{ block.super }}
	{% include 'cosinnus/map/static_dependencies.html' %}
{% endblock extrahead %}

{% block body_attributes %}class="v2-dashboard-body"{% endblock body_attributes %}

{% block container_classes %}v2-dashboard{% endblock container_classes %}

{% block main_page %}
    	{% include 'cosinnus/common/internet_explorer_not_supported.html' %}
    
        {% comment %} Some settings for the dashboard are initialized in the extraheader, and passed in a router.js, and uses a lot of
                       the default settings defined in map.js.  
                      We don't pass a `settings param here because we use all the default ones.`      
        {% endcomment %}
        
		<div class="row narrow-row">
		
			<div class="dashboard-left-bar narrow-column dashboard-column col-xs-12 col-md-3">
				<div class="dashboard-left-bar-content" style="display: none;">
					<div class="group-widget-root">
					</div>
					<div class="ideas-widget-root">
					</div>
					<div class="map-widget-root">
						map
					</div>
					<div class="legal-links">
						links
					</div>
				</div>
			</div>
			
			<div class="dashboard-center-bar narrow-column dashboard-column col-xs-12 col-md-6">
				
				<div class="dashboard-news-create-frame">
					<h2 class="headline">{% trans "News" %}</h2>
					
					<div class="news-textbox-frame">
						<div class="news-textbox" data-toggle="modal" data-target="#write-news-modal">
							<span class="news-textbox-icon">
								<i class="fa fa-fw fa-pencil"></i>
							</span>
							{% trans "What's the latest news?" %}
						</div>
					</div>
					{% include 'cosinnus_note/note_form_modal.html' with group=forum_group form=note_form %}
				</div>
				
				<div class="timeline-root">
					
					<div class="timeline-controls">
					
						<table class="onoffswitch-frame">
				            <tr>
				                <td>
				                    <div class="onoffswitch">
				                        <input type="checkbox" name="onoffswitch-group-content-only"
				                        	 class="onoffswitch-checkbox check-group-content-only" id="check-group-content-only" 
				                        	 {% if not TODO_TEST %}checked{% endif %}>
				                        <label class="onoffswitch-label" for="check-group-content-only">
				                            <span class="onoffswitch-inner"></span>
				                            <span class="onoffswitch-switch"></span>
				                        </label>
				                    </div>
				                </td>
				                <td class="onoffswitch-text-label text-bold">
				                    {% trans "Only content from my Groups and Projects" %}
				                </td>
				            </tr>
				        </table>
				        		
					</div>
					
					<div class="timeline">
						TODO: add flashy loading placeholder
					
					</div>
				</div>
				
			</div>
			
			<div class="dashboard-right-bar narrow-column dashboard-column col-xs-12 col-md-3">
				<div class="dashboard-right-bar-content" style="display: none;">
					<div class="typed-widgets-root">
					</div>
				</div>
			</div>
			
		</div>
	</div>
	
    
    <script>
	    $('html').on('init:client', function () {
	        console.log('got init client, now init:module-full-routed');
	        Backbone.mediator.publish('init:module-user-dashboard', {{ user_dashboard_options_json|safe }});
	    });
	</script>

{% endblock main_page %}
